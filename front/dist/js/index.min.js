function Banner(){this.index=1,this.bannerWidth=798,this.leftArrow=$(".left-arrow"),this.rightArrow=$(".right-arrow"),this.bannerUl=$("#banner-ul"),this.liList=this.bannerUl.children("li"),this.bannerCount=this.liList.length,this.bannerGroup=$("#banner-group"),this.pageControl=$(".page-control")}function Index(){var n=this;n.page=2,n.category_id=0,n.loadBtn=$("#load-more-btn")}Banner.prototype.initBanner=function(){var n=this,t=n.liList.eq(0).clone(),e=n.liList.eq(n.bannerCount-1).clone();n.bannerUl.append(t),n.bannerUl.prepend(e),n.bannerUl.css({width:n.bannerWidth*(n.bannerCount+2),left:-n.bannerWidth})},Banner.prototype.initPageControl=function(){for(var n=this,t=0;t<n.bannerCount;t++){var e=$("<li></li>");n.pageControl.append(e),0===t&&e.addClass("active")}n.pageControl.css({width:28*n.bannerCount})},Banner.prototype.animate=function(){var n=this;n.bannerUl.stop().animate({left:-798*n.index},750);var t=n.index;t=0===t?n.bannerCount-1:t===n.bannerCount+1?0:n.index-1,n.pageControl.children("li").eq(t).addClass("active").siblings().removeClass("active")},Banner.prototype.toggleArrow=function(n){n?(this.leftArrow.show(),this.rightArrow.show()):(this.leftArrow.hide(),this.rightArrow.hide())},Banner.prototype.loop=function(){var n=this;$("#banner-ul");this.timer=setInterval(function(){n.index>=n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()},2e3)},Banner.prototype.listenArrowClick=function(){var n=this;n.leftArrow.click(function(){0===n.index?(n.bannerUl.css({left:-n.bannerCount*n.bannerWidth}),n.index=n.bannerCount-1):n.index--,n.animate()}),n.rightArrow.click(function(){n.index===n.bannerCount+1?(n.bannerUl.css({left:-n.bannerWidth}),n.index=2):n.index++,n.animate()})},Banner.prototype.listenBannerHover=function(){var n=this;this.bannerGroup.hover(function(){clearInterval(n.timer),n.toggleArrow(!0)},function(){n.loop(),n.toggleArrow(!1)})},Banner.prototype.listenPageControl=function(){var e=this;e.pageControl.children("li").each(function(n,t){$(t).click(function(){e.index=n,e.animate()})})},Banner.prototype.run=function(){this.initBanner(),this.initPageControl(),this.loop(),this.listenArrowClick(),this.listenBannerHover(),this.listenPageControl()},Index.prototype.listenLoadMoreEvent=function(){var i=this,r=$("#load-more-btn");r.click(function(){xfzajax.get({url:"/news/news_list/",data:{p:i.page,category_id:i.category_id},success:function(n){if(200===n.code){var t=n.data;if(0<t.length){var e=template("news-item",{newses:t});$(".list-inner-group").append(e),i.page+=1}else r.hide()}}})})},Index.prototype.listenCategorySwitchEvent=function(){var o=this;$(".list-tab").children().click(function(){var r=$(this),a=r.attr("data-category");xfzajax.get({url:"/news/news_list/",data:{page:1,category_id:a},success:function(n){var t=n.data,e=template("news-item",{newses:t}),i=$(".list-inner-group");i.empty(),i.append(e),o.page=2,o.category_id=a,r.addClass("active").siblings().removeClass("active"),o.loadBtn.show()}})})},Index.prototype.run=function(){this.listenLoadMoreEvent(),this.listenCategorySwitchEvent()},$(function(){var n=new Banner,t=new Index;n.run(),t.run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJhbm5lciIsInRoaXMiLCJpbmRleCIsImJhbm5lcldpZHRoIiwibGVmdEFycm93IiwiJCIsInJpZ2h0QXJyb3ciLCJiYW5uZXJVbCIsImxpTGlzdCIsImNoaWxkcmVuIiwiYmFubmVyQ291bnQiLCJsZW5ndGgiLCJiYW5uZXJHcm91cCIsInBhZ2VDb250cm9sIiwiSW5kZXgiLCJzZWxmIiwicGFnZSIsImNhdGVnb3J5X2lkIiwibG9hZEJ0biIsInByb3RvdHlwZSIsImluaXRCYW5uZXIiLCJmaXJzdEJhbm5lciIsImVxIiwiY2xvbmUiLCJsYXN0QmFubmVyIiwiYXBwZW5kIiwicHJlcGVuZCIsImNzcyIsIndpZHRoIiwibGVmdCIsImluaXRQYWdlQ29udHJvbCIsImkiLCJjaXJjbGUiLCJhZGRDbGFzcyIsImFuaW1hdGUiLCJzdG9wIiwic2libGluZ3MiLCJyZW1vdmVDbGFzcyIsInRvZ2dsZUFycm93IiwiaXNTaG93Iiwic2hvdyIsImhpZGUiLCJsb29wIiwidGltZXIiLCJzZXRJbnRlcnZhbCIsImxpc3RlbkFycm93Q2xpY2siLCJjbGljayIsImxpc3RlbkJhbm5lckhvdmVyIiwiaG92ZXIiLCJjbGVhckludGVydmFsIiwibGlzdGVuUGFnZUNvbnRyb2wiLCJlYWNoIiwib2JqIiwicnVuIiwibGlzdGVuTG9hZE1vcmVFdmVudCIsInhmemFqYXgiLCJnZXQiLCJ1cmwiLCJkYXRhIiwicCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJuZXdzZXMiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQiLCJsaSIsImF0dHIiLCJuZXdzTGlzdEdyb3VwIiwiZW1wdHkiLCJiYW5uZXIiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFNBQ0xDLEtBQUtDLE1BQVEsRUFDYkQsS0FBS0UsWUFBYyxJQUNuQkYsS0FBS0csVUFBWUMsRUFBRSxlQUNuQkosS0FBS0ssV0FBYUQsRUFBRSxnQkFDcEJKLEtBQUtNLFNB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LEVBQUUscUJBQ3RCK0QsRUFBY0MsUUFDZEQsRUFBYzNDLE9BQU9zQyxHQUNyQmhELEVBQUtDLEtBQU8sRUFDWkQsRUFBS0UsWUFBY0EsRUFDbkJpRCxFQUFHakMsU0FBUyxVQUFVRyxXQUFXQyxZQUFZLFVBQzdDdEIsRUFBS0csUUFBUXNCLGFBTTdCMUIsTUFBTUssVUFBVWtDLElBQU0sV0FDUHBELEtBQ05xRCxzQkFETXJELEtBRU5nRSw2QkFHVDVELEVBQUUsV0FDRSxJQUFJaUUsRUFBUyxJQUFJdEUsT0FDYkUsRUFBUSxJQUFJWSxNQUNoQndELEVBQU9qQixNQUNQbkQsRUFBTW1EIiwiZmlsZSI6ImluZGV4Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcigpIHtcclxuICAgIHRoaXMuaW5kZXggPSAxO1xyXG4gICAgdGhpcy5iYW5uZXJXaWR0aCA9IDc5ODtcclxuICAgIHRoaXMubGVmdEFycm93ID0gJChcIi5sZWZ0LWFycm93XCIpO1xyXG4gICAgdGhpcy5yaWdodEFycm93ID0gJChcIi5yaWdodC1hcnJvd1wiKTtcclxuICAgIHRoaXMuYmFubmVyVWwgPSAkKFwiI2Jhbm5lci11bFwiKTtcclxuICAgIHRoaXMubGlMaXN0ID0gdGhpcy5iYW5uZXJVbC5jaGlsZHJlbihcImxpXCIpO1xyXG4gICAgdGhpcy5iYW5uZXJDb3VudCA9IHRoaXMubGlMaXN0Lmxlbmd0aDtcclxuICAgIHRoaXMuYmFubmVyR3JvdXAgPSAkKFwiI2Jhbm5lci1ncm91cFwiKTtcclxuICAgIHRoaXMucGFnZUNvbnRyb2wgPSAkKFwiLnBhZ2UtY29udHJvbFwiKTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUuaW5pdEJhbm5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBmaXJzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKDApLmNsb25lKCk7XHJcbiAgICB2YXIgbGFzdEJhbm5lciA9IHNlbGYubGlMaXN0LmVxKHNlbGYuYmFubmVyQ291bnQgLSAxKS5jbG9uZSgpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5hcHBlbmQoZmlyc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5wcmVwZW5kKGxhc3RCYW5uZXIpO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wid2lkdGhcIjogc2VsZi5iYW5uZXJXaWR0aCAqIChzZWxmLmJhbm5lckNvdW50ICsgMiksIFwibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5pbml0UGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGYuYmFubmVyQ291bnQ7IGkrKykge1xyXG4gICAgICAgIHZhciBjaXJjbGUgPSAkKFwiPGxpPjwvbGk+XCIpO1xyXG4gICAgICAgIHNlbGYucGFnZUNvbnRyb2wuYXBwZW5kKGNpcmNsZSk7XHJcbiAgICAgICAgaWYgKGkgPT09IDApIHtcclxuICAgICAgICAgICAgY2lyY2xlLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGYucGFnZUNvbnRyb2wuY3NzKHtcIndpZHRoXCI6IHNlbGYuYmFubmVyQ291bnQgKiAyOH0pO1xyXG59O1xyXG5cclxuQmFubmVyLnByb3RvdHlwZS5hbmltYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5iYW5uZXJVbC5zdG9wKCkuYW5pbWF0ZSh7XCJsZWZ0XCI6IC03OTggKiBzZWxmLmluZGV4fSwgNzUwKTtcclxuICAgIHZhciBpbmRleCA9IHNlbGYuaW5kZXg7XHJcbiAgICBpZiAoaW5kZXggPT09IDApIHtcclxuICAgICAgICBpbmRleCA9IHNlbGYuYmFubmVyQ291bnQgLSAxO1xyXG4gICAgfSBlbHNlIGlmIChpbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICBpbmRleCA9IDA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGluZGV4ID0gc2VsZi5pbmRleCAtIDE7XHJcbiAgICB9XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZXEoaW5kZXgpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnRvZ2dsZUFycm93ID0gZnVuY3Rpb24gKGlzU2hvdykge1xyXG4gICAgaWYgKGlzU2hvdykge1xyXG4gICAgICAgIHRoaXMubGVmdEFycm93LnNob3coKTtcclxuICAgICAgICB0aGlzLnJpZ2h0QXJyb3cuc2hvdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB0aGlzLmxlZnRBcnJvdy5oaWRlKCk7XHJcbiAgICAgICAgdGhpcy5yaWdodEFycm93LmhpZGUoKTtcclxuICAgIH1cclxuICAgIDtcclxufTtcclxuXHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxvb3AgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB2YXIgYmFubmVyVWwgPSAkKFwiI2Jhbm5lci11bFwiKTtcclxuICAgIHRoaXMudGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPj0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4KytcclxuICAgICAgICB9XHJcbiAgICAgICAgO1xyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSwgMjAwMCk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLmxpc3RlbkFycm93Q2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxlZnRBcnJvdy5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHNlbGYuaW5kZXggPT09IDApIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJDb3VudCAqIHNlbGYuYmFubmVyV2lkdGh9KVxyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gc2VsZi5iYW5uZXJDb3VudCAtIDE7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5pbmRleC0tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmFuaW1hdGUoKTtcclxuICAgIH0pO1xyXG4gICAgc2VsZi5yaWdodEFycm93LmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoc2VsZi5pbmRleCA9PT0gc2VsZi5iYW5uZXJDb3VudCArIDEpIHtcclxuICAgICAgICAgICAgc2VsZi5iYW5uZXJVbC5jc3Moe1wibGVmdFwiOiAtc2VsZi5iYW5uZXJXaWR0aH0pO1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4ID0gMjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzZWxmLmluZGV4Kys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuYW5pbWF0ZSgpO1xyXG4gICAgfSlcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuQmFubmVySG92ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB0aGlzLmJhbm5lckdyb3VwLmhvdmVyKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDpvKDmoIfov5vlhaXkuovku7ZcclxuICAgICAgICBjbGVhckludGVydmFsKHNlbGYudGltZXIpO1xyXG4gICAgICAgIHNlbGYudG9nZ2xlQXJyb3codHJ1ZSk7XHJcbiAgICB9LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g6byg5qCH56a75byA5LqL5Lu2XHJcbiAgICAgICAgc2VsZi5sb29wKCk7XHJcbiAgICAgICAgc2VsZi50b2dnbGVBcnJvdyhmYWxzZSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbkJhbm5lci5wcm90b3R5cGUubGlzdGVuUGFnZUNvbnRyb2wgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2VDb250cm9sLmNoaWxkcmVuKFwibGlcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIG9iaikge1xyXG4gICAgICAgICQob2JqKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuaW5kZXggPSBpbmRleDtcclxuICAgICAgICAgICAgc2VsZi5hbmltYXRlKCk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRoaXMuaW5pdEJhbm5lcigpO1xyXG4gICAgdGhpcy5pbml0UGFnZUNvbnRyb2woKTtcclxuICAgIHRoaXMubG9vcCgpO1xyXG4gICAgdGhpcy5saXN0ZW5BcnJvd0NsaWNrKCk7XHJcbiAgICB0aGlzLmxpc3RlbkJhbm5lckhvdmVyKCk7XHJcbiAgICB0aGlzLmxpc3RlblBhZ2VDb250cm9sKCk7XHJcblxyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5kZXgoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLnBhZ2UgPSAyO1xyXG4gICAgc2VsZi5jYXRlZ29yeV9pZCA9IDA7XHJcbiAgICBzZWxmLmxvYWRCdG4gPSAkKFwiI2xvYWQtbW9yZS1idG5cIik7XHJcbn07XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuTG9hZE1vcmVFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciBsb2FkQnRuID0gJChcIiNsb2FkLW1vcmUtYnRuXCIpO1xyXG4gICAgbG9hZEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4gICAgICAgICAgICBcInVybFwiOiBcIi9uZXdzL25ld3NfbGlzdC9cIixcclxuICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgIFwicFwiOiBzZWxmLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICBcImNhdGVnb3J5X2lkXCI6IHNlbGYuY2F0ZWdvcnlfaWQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0W1wiY29kZVwiXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFtcImRhdGFcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld3Nlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcIm5ld3MtaXRlbVwiLCB7XCJuZXdzZXNcIjogbmV3c2VzfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1bCA9ICQoXCIubGlzdC1pbm5lci1ncm91cFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdWwuYXBwZW5kKHRwbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYucGFnZSArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRCdG4uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5JbmRleC5wcm90b3R5cGUubGlzdGVuQ2F0ZWdvcnlTd2l0Y2hFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0YWJHcm91cCA9ICQoXCIubGlzdC10YWJcIik7XHJcbiAgICB0YWJHcm91cC5jaGlsZHJlbigpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbGkgPSAkKHRoaXMpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeV9pZCA9IGxpLmF0dHIoXCJkYXRhLWNhdGVnb3J5XCIpO1xyXG4gICAgICAgIHZhciBwYWdlID0gMTtcclxuICAgICAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwiL25ld3MvbmV3c19saXN0L1wiLFxyXG4gICAgICAgICAgICBcImRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwYWdlXCI6IHBhZ2UsXHJcbiAgICAgICAgICAgICAgICBcImNhdGVnb3J5X2lkXCI6IGNhdGVnb3J5X2lkLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld3NlcyA9IHJlc3VsdFtcImRhdGFcIl07XHJcbiAgICAgICAgICAgICAgICB2YXIgdHBsID0gdGVtcGxhdGUoXCJuZXdzLWl0ZW1cIiwge1wibmV3c2VzXCI6IG5ld3Nlc30pO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld3NMaXN0R3JvdXAgPSAkKFwiLmxpc3QtaW5uZXItZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICBuZXdzTGlzdEdyb3VwLmFwcGVuZCh0cGwpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMjtcclxuICAgICAgICAgICAgICAgIHNlbGYuY2F0ZWdvcnlfaWQgPSBjYXRlZ29yeV9pZDtcclxuICAgICAgICAgICAgICAgIGxpLmFkZENsYXNzKFwiYWN0aXZlXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxvYWRCdG4uc2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5JbmRleC5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgc2VsZi5saXN0ZW5Mb2FkTW9yZUV2ZW50KCk7XHJcbiAgICBzZWxmLmxpc3RlbkNhdGVnb3J5U3dpdGNoRXZlbnQoKTtcclxufTtcclxuXHJcbiQoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhbm5lciA9IG5ldyBCYW5uZXIoKTtcclxuICAgIHZhciBpbmRleCA9IG5ldyBJbmRleCgpO1xyXG4gICAgYmFubmVyLnJ1bigpO1xyXG4gICAgaW5kZXgucnVuKCk7XHJcbn0pOyJdfQ==
