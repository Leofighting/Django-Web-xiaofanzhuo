function Banners(){}Banners.prototype.listenAddBannerEvent=function(){var n=this;$("#add-banner-btn").click(function(){6<=$(".banner-list-group").children().length?window.messageBox.showInfo("最多只能添加6张轮播图~~"):n.createBannerItem()})},Banners.prototype.addImageSelectEvent=function(n){var a=n.find(".thumbnail"),e=n.find(".image-input");a.click(function(){e.click()}),e.change(function(){var n=this.files[0],e=new FormData;e.append("file",n),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(n){if(200===n.code){var e=n.data.url;a.attr("src",e)}}})})},Banners.prototype.addRemoveBannerEvent=function(e){e.find(".close-btn").click(function(){var n=e.attr("data-banner-id");n?xfzalert.alertConfirm({text:"确定要删除？",confirmCallback:function(){xfzajax.post({url:"/cms/delete_banner/",data:{banner_id:n},success:function(n){200===n.code&&(e.remove(),window.messageBox.showSuccess("轮播图删除成功~~"))}})}}):e.remove()})},Banners.prototype.addSaveBannerEvent=function(t){var n=t.find(".save-btn"),r=t.find(".thumbnail"),i=t.find("input[name='priority']"),o=t.find("input[name='link_to']"),s=t.find("span[class='priority']"),c=t.attr("data-banner-id"),d="";d=c?"/cms/edit_banner/":"/cms/add_banner/",n.click(function(){var n=r.attr("src"),e=i.val(),a=o.val();xfzajax.post({url:d,data:{pk:c,image_url:n,priority:e,link_to:a},success:function(n){200===n.code&&(c?window.messageBox.showSuccess("轮播图修改成功~~"):(c=n.data.banner_id,t.attr("data-banner-id",c),window.messageBox.showSuccess("轮播图添加成功~~")),s.text("优先级："+e))}})})},Banners.prototype.loadData=function(){var r=this;xfzajax.get({url:"/cms/banner_list/",success:function(n){if(200===n.code)for(var e=n.data,a=0;a<e.length;a++){var t=e[a];r.createBannerItem(t)}}})},Banners.prototype.createBannerItem=function(n){var e=this,a=template("banner-item",{banner:n}),t=$(".banner-list-group"),r=null;r=n?(t.append(a),t.find(".banner-item:last")):(t.prepend(a),t.find(".banner-item:first")),e.addImageSelectEvent(r),e.addRemoveBannerEvent(r),e.addSaveBannerEvent(r)},Banners.prototype.run=function(){this.listenAddBannerEvent(),this.loadData()},$(function(){(new Banners).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJhbm5lcnMuanMiXSwibmFtZXMiOlsiQmFubmVycyIsInByb3RvdHlwZSIsImxpc3RlbkFkZEJhbm5lckV2ZW50Iiwic2VsZiIsInRoaXMiLCIkIiwiY2xpY2siLCJjaGlsZHJlbiIsImxlbmd0aCIsIndpbmRvdyIsIm1lc3NhZ2VCb3giLCJzaG93SW5mbyIsImNyZWF0ZUJhbm5lckl0ZW0iLCJhZGRJbWFnZVNlbGVjdEV2ZW50IiwiYmFubmVySXRlbSIsImltYWdlIiwiZmluZCIsImltYWdlSW5wdXQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJhdHRyIiwiYWRkUmVtb3ZlQmFubmVyRXZlbnQiLCJiYW5uZXJJZCIsInhmemFsZXJ0IiwiYWxlcnRDb25maXJtIiwidGV4dCIsImNvbmZpcm1DYWxsYmFjayIsImJhbm5lcl9pZCIsInJlbW92ZSIsInNob3dTdWNjZXNzIiwiYWRkU2F2ZUJhbm5lckV2ZW50Iiwic2F2ZUJ0biIsImltYWdlVGFnIiwicHJpb3JpdHlUYWciLCJsaW5rdG9UYWciLCJwcmlvcml0eVNwYW4iLCJpbWFnZV91cmwiLCJwcmlvcml0eSIsInZhbCIsImxpbmtfdG8iLCJwayIsImxvYWREYXRhIiwiZ2V0IiwiYmFubmVycyIsImkiLCJiYW5uZXIiLCJ0cGwiLCJ0ZW1wbGF0ZSIsImJhbm5lckxpc3RHcm91cCIsInByZXBlbmQiLCJydW4iXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFdBSVRBLFFBQVFDLFVBQVVDLHFCQUF1QixXQUNyQyxJQUFJQyxFQUFPQyxLQUVFQyxFQUFFLG1CQUNSQyxNQUFNLFdBR0ssR0FGUUQsRUFBRSxzQkFDS0UsV0FBV0MsT0FFcENDLE9BQU9DLFdBQVdDLFNBQVMsaUJBRy9CUixFQUFLUyxzQkFJYlosUUFBUUMs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R1RoRCxFQUFFLFlBQ2dCLElBQUlMLFNBQ1Y4RCIsImZpbGUiOiJiYW5uZXJzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIEJhbm5lcnMoKSB7XHJcblxyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUubGlzdGVuQWRkQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgdmFyIGFkZEJ0biA9ICQoXCIjYWRkLWJhbm5lci1idG5cIik7XHJcbiAgICBhZGRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKFwiLmJhbm5lci1saXN0LWdyb3VwXCIpO1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBiYW5uZXJMaXN0R3JvdXAuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgaWYgKGxlbmd0aCA+PSA2KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dJbmZvKFwi5pyA5aSa5Y+q6IO95re75YqgNuW8oOi9ruaSreWbvn5+XCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbSgpO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRJbWFnZVNlbGVjdEV2ZW50ID0gZnVuY3Rpb24gKGJhbm5lckl0ZW0pIHtcclxuICAgIHZhciBpbWFnZSA9IGJhbm5lckl0ZW0uZmluZChcIi50aHVtYm5haWxcIik7XHJcbiAgICB2YXIgaW1hZ2VJbnB1dCA9IGJhbm5lckl0ZW0uZmluZChcIi5pbWFnZS1pbnB1dFwiKTtcclxuICAgIGltYWdlLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpbWFnZUlucHV0LmNsaWNrKCk7XHJcbiAgICB9KTtcclxuICAgIGltYWdlSW5wdXQuY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHRoaXMuZmlsZXNbMF07XHJcbiAgICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiZmlsZVwiLCBmaWxlKTtcclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICBcInVybFwiOiBcIi9jbXMvdXBsb2FkX2ZpbGUvXCIsXHJcbiAgICAgICAgICAgIFwiZGF0YVwiOiBmb3JtRGF0YSxcclxuICAgICAgICAgICAgXCJwcm9jZXNzRGF0YVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJjb250ZW50VHlwZVwiOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJzdWNjZXNzXCI6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gcmVzdWx0W1wiZGF0YVwiXVtcInVybFwiXTtcclxuICAgICAgICAgICAgICAgICAgICBpbWFnZS5hdHRyKFwic3JjXCIsIHVybCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuYWRkUmVtb3ZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xyXG4gICAgdmFyIGNsb3NlQnRuID0gYmFubmVySXRlbS5maW5kKFwiLmNsb3NlLWJ0blwiKTtcclxuXHJcbiAgICBjbG9zZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGJhbm5lcklkID0gYmFubmVySXRlbS5hdHRyKFwiZGF0YS1iYW5uZXItaWRcIik7XHJcbiAgICAgICAgaWYgKGJhbm5lcklkKSB7XHJcbiAgICAgICAgICAgIHhmemFsZXJ0LmFsZXJ0Q29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICBcInRleHRcIjogXCLnoa7lrpropoHliKDpmaTvvJ9cIixcclxuICAgICAgICAgICAgICAgIFwiY29uZmlybUNhbGxiYWNrXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInVybFwiOiBcIi9jbXMvZGVsZXRlX2Jhbm5lci9cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkYXRhXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYmFubmVyX2lkXCI6IGJhbm5lcklkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0W1wiY29kZVwiXSA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySXRlbS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui9ruaSreWbvuWIoOmZpOaIkOWKn35+XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhbm5lckl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5hZGRTYXZlQmFubmVyRXZlbnQgPSBmdW5jdGlvbiAoYmFubmVySXRlbSkge1xyXG4gICAgdmFyIHNhdmVCdG4gPSBiYW5uZXJJdGVtLmZpbmQoXCIuc2F2ZS1idG5cIik7XHJcbiAgICB2YXIgaW1hZ2VUYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCIudGh1bWJuYWlsXCIpO1xyXG4gICAgdmFyIHByaW9yaXR5VGFnID0gYmFubmVySXRlbS5maW5kKFwiaW5wdXRbbmFtZT0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBsaW5rdG9UYWcgPSBiYW5uZXJJdGVtLmZpbmQoXCJpbnB1dFtuYW1lPSdsaW5rX3RvJ11cIik7XHJcbiAgICB2YXIgcHJpb3JpdHlTcGFuID0gYmFubmVySXRlbS5maW5kKFwic3BhbltjbGFzcz0ncHJpb3JpdHknXVwiKTtcclxuICAgIHZhciBiYW5uZXJJZCA9IGJhbm5lckl0ZW0uYXR0cihcImRhdGEtYmFubmVyLWlkXCIpO1xyXG4gICAgdmFyIHVybCA9IFwiXCI7XHJcbiAgICBpZiAoYmFubmVySWQpIHtcclxuICAgICAgICB1cmwgPSBcIi9jbXMvZWRpdF9iYW5uZXIvXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHVybCA9IFwiL2Ntcy9hZGRfYmFubmVyL1wiO1xyXG4gICAgfVxyXG4gICAgc2F2ZUJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGltYWdlX3VybCA9IGltYWdlVGFnLmF0dHIoXCJzcmNcIik7XHJcbiAgICAgICAgdmFyIHByaW9yaXR5ID0gcHJpb3JpdHlUYWcudmFsKCk7XHJcbiAgICAgICAgdmFyIGxpbmtfdG8gPSBsaW5rdG9UYWcudmFsKCk7XHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgXCJ1cmxcIjogdXJsLFxyXG4gICAgICAgICAgICBcImRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJwa1wiOiBiYW5uZXJJZCxcclxuICAgICAgICAgICAgICAgIFwiaW1hZ2VfdXJsXCI6IGltYWdlX3VybCxcclxuICAgICAgICAgICAgICAgIFwicHJpb3JpdHlcIjogcHJpb3JpdHksXHJcbiAgICAgICAgICAgICAgICBcImxpbmtfdG9cIjogbGlua190b1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChiYW5uZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93U3VjY2VzcyhcIui9ruaSreWbvuS/ruaUueaIkOWKn35+XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFubmVySWQgPSByZXN1bHRbXCJkYXRhXCJdW1wiYmFubmVyX2lkXCJdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYW5uZXJJdGVtLmF0dHIoXCJkYXRhLWJhbm5lci1pZFwiLCBiYW5uZXJJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tZXNzYWdlQm94LnNob3dTdWNjZXNzKFwi6L2u5pKt5Zu+5re75Yqg5oiQ5Yqffn5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5U3Bhbi50ZXh0KFwi5LyY5YWI57qn77yaXCIgKyBwcmlvcml0eSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUubG9hZERhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICB4ZnphamF4LmdldCh7XHJcbiAgICAgICAgXCJ1cmxcIjogXCIvY21zL2Jhbm5lcl9saXN0L1wiLFxyXG4gICAgICAgIFwic3VjY2Vzc1wiOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHRbXCJjb2RlXCJdID09PSAyMDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYW5uZXJzID0gcmVzdWx0W1wiZGF0YVwiXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmFubmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiYW5uZXIgPSBiYW5uZXJzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlQmFubmVySXRlbShiYW5uZXIpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5cclxuQmFubmVycy5wcm90b3R5cGUuY3JlYXRlQmFubmVySXRlbSA9IGZ1bmN0aW9uIChiYW5uZXIpIHtcclxuICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgIHZhciB0cGwgPSB0ZW1wbGF0ZShcImJhbm5lci1pdGVtXCIsIHtcImJhbm5lclwiOiBiYW5uZXJ9KTtcclxuICAgIHZhciBiYW5uZXJMaXN0R3JvdXAgPSAkKFwiLmJhbm5lci1saXN0LWdyb3VwXCIpO1xyXG4gICAgdmFyIGJhbm5lckl0ZW0gPSBudWxsO1xyXG4gICAgaWYgKGJhbm5lcikge1xyXG4gICAgICAgIGJhbm5lckxpc3RHcm91cC5hcHBlbmQodHBsKTtcclxuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06bGFzdFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYmFubmVyTGlzdEdyb3VwLnByZXBlbmQodHBsKTtcclxuICAgICAgICBiYW5uZXJJdGVtID0gYmFubmVyTGlzdEdyb3VwLmZpbmQoXCIuYmFubmVyLWl0ZW06Zmlyc3RcIik7XHJcbiAgICB9XHJcbiAgICBzZWxmLmFkZEltYWdlU2VsZWN0RXZlbnQoYmFubmVySXRlbSk7XHJcbiAgICBzZWxmLmFkZFJlbW92ZUJhbm5lckV2ZW50KGJhbm5lckl0ZW0pO1xyXG4gICAgc2VsZi5hZGRTYXZlQmFubmVyRXZlbnQoYmFubmVySXRlbSk7XHJcbn07XHJcblxyXG5CYW5uZXJzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlbkFkZEJhbm5lckV2ZW50KCk7XHJcbiAgICBzZWxmLmxvYWREYXRhKCk7XHJcbn07XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBiYW5uZXJzID0gbmV3IEJhbm5lcnMoKTtcclxuICAgIGJhbm5lcnMucnVuKCk7XHJcbn0pOyJdfQ==
