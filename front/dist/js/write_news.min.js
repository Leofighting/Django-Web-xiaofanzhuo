function News(){}News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){if(200===t.code){var e=t.data.url;$("#thumbnail-form").val(e)}}})})},News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$(this).attr("data-news-id"),n="",i=$("input[name='title']").val(),a=$("select[name='category']").val(),o=$("input[name='desc']").val(),l=$("input[name='thumbnail']").val(),s=window.ue.getContent();n=e?"/cms/edit_news/":"/cms/write_news/",xfzajax.post({url:n,data:{title:i,category:a,desc:o,thumbnail:l,content:s,pk:e},success:function(t){200===t.code&&xfzalert.alertSuccess("新闻发布成功~",function(){window.location.reload()})}})})},News.prototype.run=function(){var t=this;t.listenUploadFileEvent(),t.initUEditor(),t.listenSubmitEvent()},$(function(){(new News).run()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwibmFtZXMiOlsiTmV3cyIsInByb3RvdHlwZSIsImxpc3RlblVwbG9hZEZpbGVFdmVudCIsInVwbG9hZEJ0biIsIiQiLCJjaGFuZ2UiLCJmaWxlIiwiZmlsZXMiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwieGZ6YWpheCIsInBvc3QiLCJ1cmwiLCJkYXRhIiwicHJvY2Vzc0RhdGEiLCJjb250ZW50VHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ2YWwiLCJpbml0VUVkaXRvciIsIndpbmRvdyIsInVlIiwiVUUiLCJnZXRFZGl0b3IiLCJpbml0aWFsRnJhbWVIZWlnaHQiLCJzZXJ2ZXJVcmwiLCJsaXN0ZW5TdWJtaXRFdmVudCIsImNsaWNrIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInBrIiwidGhpcyIsImF0dHIiLCJ0aXRsZSIsImNhdGVnb3J5IiwiZGVzYyIsInRodW1ibmFpbCIsImNvbnRlbnQiLCJnZXRDb250ZW50IiwieGZ6YWxlcnQiLCJhbGVydFN1Y2Nlc3MiLCJsb2NhdGlvbiIsInJlbG9hZCIsInJ1biIsInNlbGYiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFFBSVRBLEtBQUtDLFVBQVVDLHNCQUF3QixXQUNuQyxJQUFJQyxFQUFZQyxFQUFFLGtCQUNsQkQsRUFBVUUsT0FBTyxXQUNiLElBQUlDLEVBQU9ILEVBQVUsR0FBR0ksTUFBTSxHQUMxQkMsRUFBVyxJQUFJQyxTQUNuQkQsRUFBU0UsT0FBTyxPQUFRSixHQUN4QkssUUFBUUMsS0FBSyxDQUNUQyxJQUFPLG9CQUNQQyxLQUFRTixFQUNSTyxhQUFlLEVBQ2ZDLGFBQWUsRUFDZkMsUUFBVyxTQUFVQyxHQUNqQixHQUF1QixNQUFuQkEsRUFBYSxLQUFVLENBQ3ZCLElBQUlMLEVBQU1LLEVBQWEsS0FBTyxJQUNUZCxFQUFFLG1CQUNSZSxJQUFJTixVQU92Q2IsS0FBS0MsVUFBVW1CLFlBQWMsV0FDekJDLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsU0FBVSxDQUMvQkMsbUJBQXNCLElBQ3RCQyxVQUFhLHNCQUlyQjFCLEtBQUtDLFVBQVUwQixrQkFBb0IsV0FDZnZCLEVBQUUsZUFDUndCLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE0zQixFQUFFNEIsTUFDQ0MsS0FBSyxnQkFDZHBCLEVBQU0sR0FFTnFCLEVBQVE5QixFQUFFLHVCQUF1QmUsTUFDakNnQixFQUFXL0IsRUFBRSwyQkFBMkJlLE1BQ3hDaUIsRUFBT2hDLEVBQUUsc0JBQXNCZSxNQUMvQmtCLEVBQVlqQyxFQUFFLDJCQUEyQmUsTUFDekNtQixFQUFVakIsT0FBT0MsR0FBR2lCLGFBR3BCMUIsRUFEQWtCLEVBQ00sa0JBRUEsbUJBR1ZwQixRQUFRQyxLQUFLLENBQ1RDLElBQU9BLEVBQ1BDLEtBQVEsQ0FDSm9CLE1BQVNBLEVBQ1RDLFNBQVlBLEVBQ1pDLEtBQVFBLEVBQ1JDLFVBQWFBLEVBQ2JDLFFBQVdBLEVBQ1hQLEdBQU1BLEdBRVZkLFFBQVcsU0FBVUMsR0FDTSxNQUFuQkEsRUFBYSxNQUNic0IsU0FBU0MsYUFBYSxVQUFXLFdBQzdCcEIsT0FBT3FCLFNBQVNDLGlCQVF4QzNDLEtBQUtDLFVBQVUyQyxJQUFNLFdBQ2pCLElBQUlDLEVBQU9iLEtBQ1hhLEVBQUszQyx3QkFDTDJDLEVBQUt6QixjQUNMeUIsRUFBS2xCLHFCQUdUdkIsRUFBRSxZQUNhLElBQUlKLE1BQ1Y0QyIsImZpbGUiOiJ3cml0ZV9uZXdzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIE5ld3MoKSB7XHJcblxyXG59O1xyXG5cclxuTmV3cy5wcm90b3R5cGUubGlzdGVuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgIHZhciB1cGxvYWRCdG4gPSAkKFwiI3RodW1ibmFpbC1idG5cIik7XHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsIGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgIFwidXJsXCI6IFwiL2Ntcy91cGxvYWRfZmlsZS9cIixcclxuICAgICAgICAgICAgXCJkYXRhXCI6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICBcInByb2Nlc3NEYXRhXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICBcImNvbnRlbnRUeXBlXCI6IGZhbHNlLFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFtcImRhdGFcIl1bXCJ1cmxcIl07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRodW1ibmFpbElucHV0ID0gJChcIiN0aHVtYm5haWwtZm9ybVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHVtYm5haWxJbnB1dC52YWwodXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5pbml0VUVkaXRvciA9IGZ1bmN0aW9uKCl7XHJcbiAgICB3aW5kb3cudWUgPSBVRS5nZXRFZGl0b3IoXCJlZGl0b3JcIiwge1xyXG4gICAgICAgIFwiaW5pdGlhbEZyYW1lSGVpZ2h0XCI6IDQwMCxcclxuICAgICAgICBcInNlcnZlclVybFwiOiBcIi91ZWRpdG9yL3VwbG9hZC9cIlxyXG4gICAgfSk7XHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc3VibWl0QnRuID0gJChcIiNzdWJtaXQtYnRuXCIpO1xyXG4gICAgc3VibWl0QnRuLmNsaWNrKGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdmFyIGJ0biA9ICQodGhpcyk7XHJcbiAgICAgICAgdmFyIHBrID0gYnRuLmF0dHIoXCJkYXRhLW5ld3MtaWRcIik7XHJcbiAgICAgICAgdmFyIHVybCA9IFwiXCI7XHJcblxyXG4gICAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPSd0aXRsZSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0ZWdvcnknXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIHRodW1ibmFpbCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY29udGVudCA9IHdpbmRvdy51ZS5nZXRDb250ZW50KCk7XHJcblxyXG4gICAgICAgIGlmIChwayl7XHJcbiAgICAgICAgICAgIHVybCA9IFwiL2Ntcy9lZGl0X25ld3MvXCI7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHVybCA9IFwiL2Ntcy93cml0ZV9uZXdzL1wiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgeGZ6YWpheC5wb3N0KHtcclxuICAgICAgICAgICAgXCJ1cmxcIjogdXJsLFxyXG4gICAgICAgICAgICBcImRhdGFcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ0aXRsZVwiOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgIFwiY2F0ZWdvcnlcIjogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBcImRlc2NcIjogZGVzYyxcclxuICAgICAgICAgICAgICAgIFwidGh1bWJuYWlsXCI6IHRodW1ibmFpbCxcclxuICAgICAgICAgICAgICAgIFwiY29udGVudFwiOiBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgXCJwa1wiOiBwa1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInN1Y2Nlc3NcIjogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFtcImNvZGVcIl0gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKFwi5paw6Ze75Y+R5biD5oiQ5YqfflwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH0pXHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmxpc3RlblVwbG9hZEZpbGVFdmVudCgpO1xyXG4gICAgc2VsZi5pbml0VUVkaXRvcigpO1xyXG4gICAgc2VsZi5saXN0ZW5TdWJtaXRFdmVudCgpO1xyXG59O1xyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XHJcbiAgICBuZXdzLnJ1bigpO1xyXG59KTsiXX0=
